name: Deploy-Blog

on: 
    push:
        branches: 
            - main

jobs:
    deploy:
        runs-on: ubuntu-latest

        steps:
        # 检出代码
        - uses: actions/checkout@v2
        # node
        - uses: actions/setup-node@v3
          with:
            node-version: 20
        - run: npm i pnpm -g
        - run: pnpm install --frozen-lockfile

        - name: sync
          run: pnpm sync

        - name: Build
          run: pnpm docs:build


        - name: Deploy
          uses: peaceiris/actions-gh-pages@v3
          with:
            github_token: ${{ secrets.GITHUB_TOKEN }}
            publish_dir: docs/.vitepress/dist
