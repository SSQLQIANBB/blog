
malay-project


| **功能分类** | **小模块**           | **描述**                                                                                                                           | **进度**                |
| -------- | ----------------- | -------------------------------------------------------------------------------------------------------------------------------- | --------------------- |
| 项目       | 项目类型              | 项目类型：专项工作、日常工作、会议待办
业务板块：GIHM、AHTV Alliance、汽车专项、教育专项、汽车产业转型基金、AHTV产业园开发基金、内部生态、外部合作伙伴
模块：经营管理、人力                                | 接口及字段已添加，未与后端联调       |
|          | 按钮颜色高亮修改          | 修改按钮的颜色高亮效果                                                                                                                      | 完成                    |
|          | 项目编辑页面            | 可以查看项目下关联的任务的风险问题
但该风险仅支持查看，点击编辑后无法再项目界面新增和编辑                                                                                    | 待开始                   |
| 任务       | 任务类型选择            | 创建任务时选择任务类型：项目类/单一重点类

选择项目类任务时，必须绑定项目，项目名称必填                                                                                    | 前端完成，未联调              |
|          | 单一重点类任务处理         | 选择单一重点类任务后，项目名称选择置灰                                                                                                              | 完成                    |
|          | 任务列表修改            | 新增 任务类型 字段 展示任务所属项目类 或 单一重点类
项目名称不变 项目任务名称修改为 任务名称
单一重点类任务 因为不绑定项目 因此项目名称可以为空                                                    | 完成
                   |
|          | 任务详情页修改           | 单一重点类任务，因为没有绑定项目，因此显示项目的区域为空
需要展示任务类型：单一重点类
任务名称下方新增任务描述和计划输出物展示，如果计划输出物未填，则不展示
新增风险问题模块，展示关联到此任务的风险问题，查看页面风险所有字段都不可编辑，全部置灰仅能查看  | 展示字段调整完成；
风险问题展示模块待开始 |
|          | 项目类任务标签           | 增加显示项目类标签                                                                                                                        | 未联调                   |
|          | 任务编辑页面            | 任务编辑页面新增风险问题编辑栏，但已经存在的风险问题无法编辑
点击风险问题右侧的新增按钮，会在风险问题区域最上方新建一个风险问题窗口，此时该风险问题的关联任务自动关联当前任务且无法修改                                     | 未开始                   |
| 风险       | 风险问题绑定            | 新增风险问题从绑定至项目修改为绑定至任务
后续风险问题→项目类任务→项目，也可以风险问题→单一重点类任务
点击任务信息，弹出任务选择框                                                              | 弹窗完成                  |
|          | 任务选择窗口            | 任务选择窗口可以选择所有已经创建的任务（包含单一重点类和项目类）
任务选择列表表头：任务类型、项目名称（如果是单一重点类任务则不显示）、任务名称、状态、责任人、执行人、要求完成日期
排序方式：任务创建时间倒序
任务单选，选择后点击确定，进入风险问题新增页面 | 未开始                   |
|          | 新增风险页面            | 选择任务后会进入新增风险问题页面，最上方会展示绑定的任务和项目信息
如果是项目类任务，显示该任务所属的项目
下方创建页面不做修改
项目负责人和项目成员 替换为 绑定任务的 任务责任人和任务执行人                                | 未开始                   |
|          | 风险问题绑定单一重点任务      | 如果风险问题绑定的是 单一重点了任务，这类任务没有绑定项目，那么这里风险问题的项目
信息 也为空
项目负责人和项目成员 替换为 绑定任务的 任务责任人和任务执行人                                                | 未开始                   |
|          | 风险问题列表新增 关联任务字段   | 风险问题列表新增 关联任务字段
显示该风险问题具体关联到哪个任务
如果关联的是单一重点任务，则没有相应项目名称信息
搜索框支持搜索项目名称、任务名称、风险名称                                                  | 未开始                   |
|          | 点击 编辑，进入编辑风险问题页面
 | 内容与创建页面相同，如果是单一重点类任务则项目信息不展示
项目负责人和项目成员 替换为 绑定任务的 任务责任人和任务执行人                                                                    | 未开始                   |


****项目列表筛选项-类型/分类** **


	/**    待传参      */


风险 任务责任人；风险回显


~~面包屑点击跳转第一个；~~


~~sidebar进入新增/编辑默认高亮~~


上传文件


中英文输入长度、label


富文本（带图片的复制；、缩进问题）


埋点、数据采集


埋点：zhangdengyong; 神策埋点


马来官网联系我们：姓 名顺序调整


今日完成：


人员选择组件；


分页；


状态组件封装；


路由生成菜单；并模拟根据权限code动态拦截路由，过滤菜单；


待办：新增|编辑表单细节完善


周末：


完成动态目录功能；


请求封装、表格自动设置高度


~~复习《数据结构与算法》：深度、广度优先通过队列和栈的方式实现~~

- 优化点：banner跳转链接 → 下拉文章链接选择

~~预计发布、待发布数据不展示删除按钮~~


文件上传


ssoLogin


表格动态高度


登录权限


上传后视频预览


**富文本长度校验**


12.11


留言列表


文章列表、新增、编辑接口联调；


富文本功能


12.12


权限管理、角色管理接口联调；


宿主机+nodePort

[harbor.test.geely.com/yyfs-platform/malaysia-mobile:20241212180844-4926972](http://harbor.test.geely.com/yyfs-platform/malaysia-mobile:20241212180844-4926972)


~~菜单过滤~~


~~首个目录跳转~~


~~路由拦截~~


sso登录、官网后台打包调试、


官网接入神策测试、

1. sso登录功能、官网后台打包、流水线调试
2. 大事记官网、管理平台调试、部署
3. banner官网PC、移动端接口联调；管理后台配合细节优化、官网PC端流水线解决打包失败问题
4. 文章列表、文章详情PC、移动端接口联调，管理后台附件字段调整、移动端打包以及流水线配置
5. 官网服务拆分、banner、文章、大事记上传文件功能优化以及组件提取；官网和后台数据连接调试
1. bug修改；富文本组件调试；
2. 官网pc、移动端bugfix， 文件上传前后端测试；
3. 安全校验组件版本修改、bug修改；
4. 媒体样式调整、上传交互优化、bug修改
5. release环境流水线配置（后台、pc、h5）,bug修改

**没有权限的用户进入后频繁跳出系统**


附件中英文切换后，无法获取上传成功后的回调


视频加载loading


富文本wangEditor长度校验


malay-official-web-release


malay-official-mobile-release


环境变量web/mobile 相互跳转


文章时间（时分秒）


序号改为排序字段


摘要200/500


## v1.7


几种用户身份


任务执行人、任务责任人


任务创建人、超管


项目负责人、项目成员


可编辑状态：


进行中、已延期、即将延期


|           | 可编辑状态 | 待责任人审批 | 待创建人审批 |   |
| --------- | ----- | ------ | ------ | - |
| 任务执行人、责任人 |       |        |        |   |
| 任务创建人     |       |        |        |   |
| 超管        |       |        |        |   |
| 其他        |       |        |        |   |


撤回申请关闭：流程发起人


确认记录多条中间会断开：


发起 —>驳回; 发起—>通过—>结束


结束删除发起人提出人数据


2025.01.07


文件上传状态优化；


任务列表新增筛选项；


审批弹窗组件封装；


01.08


变更记录组件


列表、详情、编辑页面按钮显示逻辑提取


官网修改；


01.10


官网后台功能优化;


马来租户接口联调；


01.13


马来租户功能开发


01.16


预发环境搭建


01.17


预发环境搭建，功能调整；


子任务未执行的显示灰色：流程图数据需返回字段：节点是否已执行


任务列表筛选项


```bash
#!/bin/bash
branch="${1:-release}"
effiFrontPath="/root/workspace/malaysia-official"
copyDistPath="/root/workspace/dist/malaysia-official/dist/"
cmdCopy="cp -r -f ./dist/** ${copyDistPath}"

# 检查工作目录是否存在
if [ ! -d "$effiFrontPath" ]; then
    echo "Error: $effiFrontPath does not exist"
    exit 1
fi

# 进入工作目录
cd "$effiFrontPath" || exit 1

# 检查工作目录是否是一个有效的 Git 仓库
if [ ! -d ".git" ]; then
    echo "Error: $effiFrontPath is not a Git repository"
    exit 1
fi

git reset --hard
git clean -fd
git fetch
git checkout "$branch"
git pull
npm install
if [ $? -eq 0 ]; then
    echo "1========npm install成功"

    echo "2========开始执行pnpm build"
    # 执行npm构建
    npm run build

    if [ $? -eq 0 ]; then
        echo "3========pnpm build成功 开始执行替换dist"
        # 检查构建产出的dist目录是否存在
        nowPath=$(pwd)
        echo "+============当前目录：$nowPath"
        if [ -d "dist" ]; then
            echo "2========开始执行替换dist步骤"
            ${cmdCopy}
            echo "3========copy完毕"
        else
            echo "2========打包失败dist不存在"
        fi
    else
        echo "2========npm build失败"
        exit 1
    fi
else
    echo "1========npm install失败"
    exit 1
fi
```


```bash
#!/bin/bash
branch="${1:-release}"
effiFrontPath="/root/workspace/malaysia-mobile"
copyDistPath="/root/workspace/dist/malaysia-mobile/dist/"
cmdCopy="cp -r -f ./dist/** ${copyDistPath}"

# 检查工作目录是否存在
if [ ! -d "$effiFrontPath" ]; then
    echo "Error: $effiFrontPath does not exist"
    exit 1
fi

# 进入工作目录
cd "$effiFrontPath" || exit 1

# 检查工作目录是否是一个有效的 Git 仓库
if [ ! -d ".git" ]; then
    echo "Error: $effiFrontPath is not a Git repository"
    exit 1
fi

git reset --hard
git clean -fd
git fetch
git checkout "$branch"
git pull
yarn install --ignore-engines
if [ $? -eq 0 ]; then
    echo "1========npm install成功"

    echo "2========开始执行pnpm build"
    # 执行npm构建
    npm run build

    if [ $? -eq 0 ]; then
        echo "3========pnpm build成功 开始执行替换dist"
        # 检查构建产出的dist目录是否存在
        nowPath=$(pwd)
        echo "+============当前目录：$nowPath"
        if [ -d "dist" ]; then
            echo "2========开始执行替换dist步骤"
            ${cmdCopy}
            echo "3========copy完毕"
        else
            echo "2========打包失败dist不存在"
        fi
    else
        echo "2========npm build失败"
        exit 1
    fi
else
    echo "1========npm install失败"
    exit 1
fi
```


2.10之前，bug修改；


之后：熟悉营销门户代码，bug修改

