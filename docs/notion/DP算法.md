
# åŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰


---


## ä¸€ã€DP çš„æœ¬è´¨ï¼ˆä¸€å¥è¯ç‰ˆï¼‰

> DP = çŠ¶æ€ + é€‰æ‹© + è½¬ç§» + è¾¹ç•Œ

4 ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š

1. **çŠ¶æ€æ˜¯ä»€ä¹ˆï¼Ÿ**ï¼ˆdp[i] è¡¨ç¤ºä»€ä¹ˆå«ä¹‰ï¼‰
2. **æœ€åä¸€æ­¥æ€ä¹ˆæ¥ï¼Ÿ**
3. **æœ‰å“ªäº›é€‰æ‹©ï¼Ÿ**
4. **åˆå§‹æ¡ä»¶ï¼Ÿ**

---


## äºŒã€åŠ¨æ€è§„åˆ’æ ¸å¿ƒé¢˜å‹åˆ†ç±»


---


## 1ï¸âƒ£ ä¸€ç»´ DPï¼ˆçº¿æ€§ DPï¼‰


### ç‰¹ç‚¹

- åªå’Œå‰é¢ 1~k ä¸ªçŠ¶æ€æœ‰å…³
- æœ€å¸¸è§ï¼Œå…¥é—¨å¿…åˆ·

### æ¨¡æ¿


```javascript
dp[0] = åˆå§‹å€¼
for (i = 1 .. n) {
  dp[i] = ä» dp[i-1], dp[i-2] ... è½¬ç§»
}
```


### ç»å…¸é¢˜

- **70. çˆ¬æ¥¼æ¢¯**
- **198. æ‰“å®¶åŠ«èˆ**
- **746. ä½¿ç”¨æœ€å°èŠ±è´¹çˆ¬æ¥¼æ¢¯**
- **53. æœ€å¤§å­æ•°ç»„å’Œï¼ˆKadaneï¼‰**

### å¿…ç»ƒ

- â­ **139. å•è¯æ‹†åˆ†**
- â­ **322. é›¶é’±å…‘æ¢**

---


## 2ï¸âƒ£ äºŒç»´ DPï¼ˆåŒºé—´ / ç½‘æ ¼ï¼‰


### 2.1 ç½‘æ ¼ DP


### ç‰¹ç‚¹

- ä»å·¦ / ä¸Š / å·¦ä¸Š æ–¹å‘è½¬ç§»çŠ¶æ€

### æ¨¡æ¿


```javascript
dp[i][j] = min(dp[i-1][j], dp[i][j-1]) + cost[i][j]
```


### ç»å…¸é¢˜

- **62 / 63. ä¸åŒè·¯å¾„**
- **64. æœ€å°è·¯å¾„å’Œ**
- **221. æœ€å¤§æ­£æ–¹å½¢**

---


### 2.2 åŒºé—´ DPï¼ˆæœ€éš¾ä½†å«é‡‘é‡é«˜ï¼‰


### ç‰¹ç‚¹

- æšä¸¾åŒºé—´é•¿åº¦
- æšä¸¾æ–­ç‚¹ k

### æ¨¡æ¿


```javascript
for (len = 2 .. n)
  for (l = 0 .. n-len)
    r = l + len - 1
    for (k = l .. r)
      dp[l][r] = min/max(dp[l][k] + dp[k+1][r] + cost)
```


### ç»å…¸é¢˜

- â­ **312. æˆ³æ°”çƒ**
- â­ **96. ä¸åŒçš„äºŒå‰æœç´¢æ ‘**
- â­ **1039. å¤šè¾¹å½¢ä¸‰è§’å‰–åˆ†**

---


## 3ï¸âƒ£ èƒŒåŒ… DPï¼ˆå¿…è€ƒå¤§ç±»ï¼‰


### 3.1 0-1 èƒŒåŒ…


### ç‰¹ç‚¹

- æ¯ä¸ªç‰©å“åªèƒ½é€‰ä¸€æ¬¡

### æ¨¡æ¿


```javascript
for item in items
  for j = W .. weight
    dp[j] = max(dp[j], dp[j-weight] + value)
```


### ç»å…¸é¢˜

- **416. åˆ†å‰²ç­‰å’Œå­é›†**
- **494. ç›®æ ‡å’Œ**
- **1049. æœ€åä¸€å—çŸ³å¤´çš„é‡é‡ II**

---


### 3.2 å®Œå…¨èƒŒåŒ…


### ç‰¹ç‚¹

- æ¯ä¸ªç‰©å“å¯ä»¥æ— é™é€‰

### æ¨¡æ¿


```javascript
for item in items
  for j = weight .. W
    dp[j] = min/max(dp[j], dp[j-weight] + value)
```


### ç»å…¸é¢˜

- â­ **322. é›¶é’±å…‘æ¢**
- **518. é›¶é’±å…‘æ¢ II**

---


### 3.3 å¤šç»´èƒŒåŒ…

- **474. ä¸€å’Œé›¶**
- **879. ç›ˆåˆ©è®¡åˆ’**

---


## 4ï¸âƒ£ å­åºåˆ— / å­—ç¬¦ä¸² DP


### ç‰¹ç‚¹

- `dp[i][j]` è¡¨ç¤ºç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²å‰ i ä¸ªå­—ç¬¦ã€ç¬¬äºŒä¸ªå­—ç¬¦ä¸²å‰ j ä¸ªå­—ç¬¦çš„çŠ¶æ€

### æ¨¡æ¿ï¼ˆæœ€é•¿å…¬å…±å­åºåˆ— LCSï¼‰


```javascript
if s[i-1] === t[j-1]
  dp[i][j] = dp[i-1][j-1] + 1
else
  dp[i][j] = max(dp[i-1][j], dp[i][j-1])
```


### ç»å…¸é¢˜

- â­ **1143. æœ€é•¿å…¬å…±å­åºåˆ—**

|   |   | a | c | e |
| - | - | - | - | - |
|   | 0 | 0 | 0 | 0 |
| a | 0 | 1 | 1 | 1 |
| b | 0 | 1 | 1 | 1 |
| c | 0 | 1 | 2 | 2 |
| d | 0 | 1 | 2 | 2 |
| e | 0 | 1 | 2 | 3 |


```javascript
// å¦‚æœ text1[i] === text2[j], åˆ™æ¯”è¾ƒtext1[i - 1]:text2[j - 1];
dp[i][j] = dp[i - 1][j - 1] + 1
// å¦‚æœ text1[i] !== text2[j],åˆ™æ¯”è¾ƒtext1[i - 1]:text2[j] || text1[i]:text2[j - 1]
dp[i][j] = Math.max(dp[i - 1][j], dp[i][j - 1]);
// dp[0][0]ä¸ºç©º
```

- â­ **72. ç¼–è¾‘è·ç¦»**

|   |   | r | o | s |
| - | - | - | - | - |
|   | 0 | 1 | 2 | 3 |
| h | 1 | 1 | 2 | 3 |
| o | 2 | 2 | 1 | 2 |
| r | 3 | 2 | 2 | 2 |
| s | 4 | 3 | 3 | 2 |
| e | 5 | 4 | 4 | 3 |


```javascript
// w1[i] === w2[j] dp[i][j] = dp[i - 1][j - 1];
// w1[i] !== w2[j] dp[i][j] = Math.min(dp[i - 1][j - 1], dp[i - 1][j], dp[i][j - 1])
// dp[i - 1][j],     // delete
// dp[i][j - 1],     // insert
// dp[i - 1][j - 1]  // replace
```

- **516. æœ€é•¿å›æ–‡å­åºåˆ—**
- **5. æœ€é•¿å›æ–‡å­ä¸²**

    **é¢˜è§£1ï¼šä¸­å¿ƒæ‰©å±•**

    - é•¿åº¦ä¸ºå¶æ•°æ—¶ï¼šä¸¤è¾¹éƒ½ç›¸ç­‰ï¼›(aabbaa)
    - é•¿åº¦ä¸ºå¥‡æ•°æ—¶ï¼šå‡ºå»ä¸­é—´çš„ä¸¤è¾¹éƒ½ç›¸ç­‰ï¼›(aabcbaa)

    ```javascript
    // å¥‡æ•°str[i, i]
    // å¶æ•°str[i, i + 1];
    // stråˆ¤æ–­é€»è¾‘ï¼š
    function str(i, j) {
      if (s[i] === s[j]) {
        if (j - i > maxlength) {
          left = i;
          right = j;
        }
    
        if (s > 0 && j < s.length - 1) str(i - 1, j + 1);
      }
    }
    ```


    **é¢˜è§£2ï¼šDPåŠ¨æ€è§„åˆ’**:

    - æ‰€æœ‰é•¿åº¦ä¸º1çš„éƒ½æ˜¯å›æ–‡å­ä¸²ï¼›i, j è¡¨ç¤ºä¸‹æ ‡ï¼›
    - dp[i][j]ä¾èµ–dp[i + 1][j - 1]

    ```javascript
    n = s.length;
    dp = Array.from({ length: n }, () => new Array(n).fill(false));
    
    // è®¾ç½®æ‰€æœ‰é•¿åº¦ä¸º1çš„å­ä¸²ä¸ºå›æ–‡ï¼›
    for (let i = 0; i < n; i++) {
      dp[i][i] = true;
    }
    // é•¿åº¦ä»2å¼€å§‹
    for (len = 2; len <= n; len++) {
      for (let i = 0; i <= n - len; i++) {
        const j = i + len - 1;
    
        if (s[i] === s[j]) {
          if (len === 2 || dp[i + 1][j - 1]) {
            dp[i][j] = true;
    
            if (maxlength < len) {
              start = i;
              maxlength = len;
            }
          }
        }
      }
    }
    ```


---


## 5ï¸âƒ£ çŠ¶æ€å‹ç¼© DPï¼ˆè¿›é˜¶ï¼‰


### ç‰¹ç‚¹

- ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºçŠ¶æ€
- æ•°æ®èŒƒå›´ n â‰¤ 15 å·¦å³

### æ¨¡æ¿


```javascript
dp[mask] = ä» mask å»æ‰ä¸€ä½è½¬ç§»
```


### ç»å…¸é¢˜

- â­ **698. åˆ’åˆ†ä¸º k ä¸ªç›¸ç­‰çš„å­é›†**
- **464. æˆ‘èƒ½èµ¢å—**
- **847. è®¿é—®æ‰€æœ‰èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„**

---


## 6ï¸âƒ£ æ ‘å½¢ DP


### ç‰¹ç‚¹

- ååºéå†äºŒå‰æ ‘
- æ¯ä¸ªèŠ‚ç‚¹æœ‰å¤šä¸ªçŠ¶æ€

### æ¨¡æ¿


```javascript
dfs(node) {
  for child in children:
    dfs(child)
  åˆå¹¶å­æ ‘çŠ¶æ€
}
```


### ç»å…¸é¢˜

- â­ **337. æ‰“å®¶åŠ«èˆ III**
- **124. äºŒå‰æ ‘ä¸­çš„æœ€å¤§è·¯å¾„å’Œ**
- **968. ç›‘æ§äºŒå‰æ ‘**

---


## ä¸‰ã€åˆ·é¢˜è·¯çº¿ï¼ˆå¼ºçƒˆæ¨èï¼‰


### ğŸš€ å…¥é—¨ï¼ˆæ‰¾æ„Ÿè§‰ï¼‰


```plain text
70 â†’ 198 â†’ 746 â†’ 62 â†’ 322
```


### ğŸ”¥ ä¸­çº§ï¼ˆå½¢æˆå¥—è·¯ï¼‰


```plain text
416 â†’ 494 â†’ 139 â†’ 1143 â†’ 72
```


### ğŸ’£ é«˜çº§ï¼ˆé¢è¯•æ€å™¨ï¼‰


```plain text
96 â†’ 312 â†’ 337 â†’ 474 â†’ 698
```

