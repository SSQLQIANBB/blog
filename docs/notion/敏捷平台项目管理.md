
520-1000


521 1091


## 组件及插件使用情况


```markdown
# 组件及插件使用情况

## 1. @zeekr-f2e/zeekr-ui3 (工作量较大)

组件文档：[Example / Button - Docs ⋅ Storybook](https://f2e-sit.zeekrlife.com/zeekr-ui3/?path=/docs/example-button--docs)

**项目中使用方式**：main 文件全局引入

**使用该 ui 组件的文件数量**：200+


## 2. @zeekr-f2e/agile-components

该组件用于人员选择。

**使用情况**：

`\packages\app\src\hook\useDefectColumns`

`\packages\app\src\hook\useStoryColumns`

## 3. @zeekr-f2e/api-detail-comp

API 详情展示插件。

**使用情况**：

`\packages\app\src\views\api`

`\plugins\api\src\components\apiList`

## 4. @zeekr-f2e/chatagent-bot

用于将 ZEEKR 智能体平台 - 聊天助手弹窗快速嵌入到网站。

访问地址：[https://chatagent.zeekrlife-test.com/agent/apps](https://chatagent.zeekrlife-test.com/agent/apps)

**使用情况**：

`\packages\app\src\views\dashboard`

## 5. @zeekr-f2e/vue3-ai-chat

zeekr Ai - chat 组件。

**使用情况**：

仅在`\packages\app\src\main`中引入 vue3-ai-chat 样式文件

## 6. @zeekr-f2e/zeekr-http

基于 axios 封装的网络请求库。

**使用情况**：

`packages\app`

`plugins\api`

`plugin\materials`

## 7. @zeekr-f2e/zeekr-sensors

用于集成神策埋点。

**使用情况**：

`packages\app\src\main`

## 8. @zeekr-f2e/zeekr-uploader

对接附件中心，完成各个云厂商的前端文件直传方案。

**使用情况**：

`\packages\app\src\components\FormUpload`

`\packages\app\src\components\WangEditor\auto-height-editor`

`\packages\app\src\components\WangEditor`

`\packages\app\src\hooks\useUploads`
```


## 仓库管理


```markdown
# 初始化：添加 B 为 upstream
git remote add upstream git@git.example.com:other-department/B-repo.git
git remote set-url --push upstream no_push  # 禁止推送

# 首次同步 share 分支
git fetch upstream share
git checkout -b share-b upstream/share  # 本地分支跟踪 upstream/share

# 日常更新（在 share-b 分支）
git pull --rebase  # 拉取最新并变基

# 合并到主开发分支（如 main）
git checkout main
git merge share-b -m "Merge B's share branch"
git push origin main  # 推送到本部门仓库 A


或者

# 拉取 B 仓库的 share 分支（不自动合并）
git fetch upstream share:temp-share  # 临时本地分支 temp-share

# 切换到目标分支（如本地 main 分支）
git checkout main

# 合并方式 1：直接合并（适合常规同步）
git merge temp-share -m "Sync B's share branch (#123)"

# 合并方式 2：变基同步（保持线性历史）
git rebase temp-share

# 清理临时分支
git branch -D temp-share


简化流程：设置跟踪分支（推荐）
bash
# 将本地 share-b 分支永久跟踪 upstream/share
git branch --track share-b upstream/share

# 后续同步只需：
git checkout share-b
git pull --rebase  # 自动拉取并变基，保持整洁
```


## 功能梳理

1. 国际化生成规则；
2. plugins插件加载及使用；
3. 项目权限，动态路由以及菜单；

## 极氪组件主要使用文件


### 1. 组件文件

1. **\packages\app\src\components\Layout\components\Navbar.vue**
    - 使用组件: `zk-button`, `zk-global-nav`,`zk-input`
2. **\packages\app\src\components\Entity\EntitySystem.vue**
    - 使用组件: `zk-page-container`, `zk-page-header`, `zk-avatar`, `zk-flexbox`
3. **\packages\app\src\components\Entity\EntityCard\EntityPropertyCard.vue**
    - 使用组件: `zk-panel`, `zk-flexbox`, `zk-flexbox-item`
4. **\packages\app\src\views\api\index.vue**
    - 使用组件: `zk-table-column`, `zk-button`, `zk-pagination`, `zk-panel`, `zk-modal`
5. **\packages\app\src\components\Entity\EntityCard\EntityIterationCard\components\story\storyDetail.vue**
    - 使用组件: `zk-image-preview`
6. **\plugins\materials\src\components\assets\index.vue**
    - 使用组件: `zk-page-container`, `zk-panel`, `zk-input`, `zk-flexbox`, `zk-flexbox-item`, `zk-result`
7. **\plugins\materials\src\components\oss\index.vue**
    - 使用组件: `zk-pagination`, `zk-panel`, `zk-image-preview`
    - 使用类型: `UniUploadServiceConfig`
8. **\plugins\materials\src\components\overview\index.vue**
    - 使用组件: `zk-page-container`, `zk-flexbox`, `zk-flexbox-item`, `zk-panel`

### 2. 工具类文件

1. **\packages\app\src\hooks\useMangeEntity.ts**
    - 使用组件: `ZkMessage`
2. **\packages\app\src\const\common.ts**
    - 使用类型: `BadgeType`, `UniUploadServiceConfig`
3. **\plugins\api\src\api\util.ts**
    - 使用组件: `ZkMessage`
4. **\packages\app\src\api\util.ts**
    - 使用组件: `ZkMessage`
5. **\plugins\materials\src\utils\common.ts**
    - 使用组件: `ZkMessage`
6. **\packages\app\componentInstance.d.ts**
    - 导入: `ZkMessage`

## 常用组件统计


根据分析，最常用的组件有：

1. **布局组件**:
    - `zk-page-container`
    - `zk-panel`
    - `zk-flexbox`/`zk-flexbox-item`
    - `zk-page-header`
2. **表单组件**:
    - `zk-button`
    - `zk-input`
    - `zk-select`
3. **数据展示组件**:
    - `zk-table-column`
    - `zk-pagination`
    - `zk-image-preview`
    - `zk-modal`
    - `zk-result`
4. **反馈组件**:
    - `ZkMessage`
5. **导航组件**:
    - `zk-global-nav`
    - `zk-side-nav`/`zk-side-nav-item`
6. **其他组件**:
    - `zk-avatar`
    - `zk-drawer`

## 类型使用


项目中使用的 `@zeekr-f2e/zeekr-ui3` 类型包括：

- `BadgeType`
- `UniUploadServiceConfig`

## 配置和依赖


在 `package.json` 中，项目依赖了 `@zeekr-f2e/zeekr-ui3` 版本 `2.16.1-beta.3`，并且在 `.npmrc` 文件中配置了私有 registry：


```plain text
@zeekr-f2e:registry=https://npm.zeekrlife.com/
```


这表明 `zeekr-ui3` 是一个内部组件库，通过私有 npm 仓库进行分发。


调整环境变量

- VITE_APP_BASE_API
- VITE_BASE_URL
- VITE_APP_CLIENT_KEY
- VITE_GEELY_SSO_BASE_URL

## 效能平台组件交互bug：


**WorkHour** 
**workHourModal**


naiveui 的 dropdown组件option内嵌modal, 当打开modal，任意点击modal位置，都会造成dropdown收起，并且modal会关闭；


解决方案：


将modal提取为与dropdown同层级组件，不要将modal放在dropdown的option中渲染


## 字段替换：label  placeholder message column


## 移除的字段，列表以及筛选条件中同步删除


### 1.  新增应用系统 1d

- 添加应用时，通过系统名称查询CMDB应用信息，进行填充，点击确认后添加到列表
- “系统名称“对应”CMDB系统名称”-可改，”系统缩写”对应“CMDB系统简称”-可改，
- “资产编码”改为“应用编码”对应“CMDB应用编码”-**不可改，**
- ”系统缩写”对应“CMDB系统简称”-可改，
- “产品负责人”对应“业务系统负责人”-可改，
- “技术负责人”对应“研发负责人”-可改，
- “业务对接人”对应“业务系统负责人”-可改，
- “系统简介”对应“系统介绍”-可改

**编辑时不需要自动填充**


### 2. 新增/编辑应用系统 (应用信息拓展：加到最后) 0.5d

- 人员设置查询用户中心用户列表；选择用户中心用户
- “成本中心”，根据用户中心组织树选择，必填
- “所属期间”，下拉选择“建设期/运维期”，必填
- “历史建设成本”，输入金额，单位元，非必填，**增加提示“系统上平台前投入的研发成本及采购成本”**

### 3. 新增需求字段调整：1d

- “需求类型”枚举调整：新增功能、功能优化、性能优化、体验优化
- “数字产品”改为“应用系统”，提示文案同步修改
- 取消“迭代类型”、“设计师”字段
- “关联业务需求”、“关联迭代”移动到“需求类型“下一行
- “产品经理“、“技术负责人”根据应用系统带出，可修改
- 相对优先级和绝对优先级改为优先级，枚举：P0/P1/P2/P3/P4
- 需求状态调整：待分析/待排期/开发中/已上线/已关闭

**注意：－－－列表字段、筛选条件、导入模板、导出字段同步调整**


### 4. 新增故事 1d

- “类型”枚举调整：新增功能、功能优化、性能优化、体验优化
- “优先级”枚举调整：P0/P1/P2/P3/P4
- “数字产品“改为”应用系统“，**提示文案同步修改**

### 5. 运维新增问题  1d

- “分类”：业务流程/功能建议/体验优化/BUG/账号权限
- “状态“：默认待解决，不可修改
- 隐藏字段：问题原因\处理方案\解决方案\备注
- “数字产品“改为”应用系统“，提示文案同步修改

**注意：运维问题导出时，数字产品同步调整为“应用系统”**


### 6. 运维：转需求、转缺陷整合为问题受理 

- 提供问题接入通用接口，受理人为空时自动带出应用产品经理
- 原转需求/转缺陷操作，改为“问题受理“ （最好的方式是不要合并为问题受理， 操作变为：转需求\转缺陷\运营解决）
- 受理类型：转需求\转缺陷\运营解决，转需求/转缺陷按现有功能实现，
- 运营解决，下拉选择解决手段：通过产品配置解决/通过用户答疑解决/通过其他手段解决
- 转需求或转缺陷后，运维问题状态修改为解决中
- 迭代完成后，迭代下需求和缺陷关联的问题状态为已解决

### 7. 新建迭代 1d

- 新增”迭代类型“、”关联项目“，放在迭代名称后
- 迭代类型：常规迭代、项目迭代
- 项目迭代选择对应的项目：项目来源：**DOMS**项目清单－进行中项目
- 增加：安全测试问卷入口，放在是否需要性能测试后

### 8. 迭代样式优化 1d

- 迭代列表不区分选中和待选区
- 选中的迭代样式按现有的样式展示
- 未选中的迭代简化展示，区域缩小一般，只展示迭代名称和周期，状态采用样式边框颜色区分，未开始边框为灰色、进行中边框为黄色、已完成变框为绿色

### 9. 工作项：新建故事 ? 

- 预估工时放到任务上，一个任务一条预估工时：
- 新增”工作类别”和“预估工时”，同预估工时，放到计划完成时间后

### 10. 工作项：添加子任务 ? 

- 预估工时放到任务上，一个任务一条预估工时：
- 新增”工作类别”和“预估工时”，同预估工时，放到计划时间旁边

### 11. 工作项：登记工时 ? 1d

- 同 **DOMS** 工时填报组件，日期可选过去３天，成本中心和项目根据迭代带出，选择任务、填报时长和工作内容
- 需要将填报的工时信息同步到DOMS

### 12. 系统名称及LOGO调整 0.5d


|   |   |
| - | - |
|   |   |
|   |   |


## 现存bug:

- sessionUserInfo,新打开tab,使用sessionStorage获取用户信息问题；调整为localStorage;
- 工时填报table弹出框异常关闭问题；
- 工作项列表筛选条件（全部工作项）删除，列表未刷新；
- 需求新建时，关联业务需求字段提示信息：选择应用系统后自动带出，组件封装与productId无关联，提示无作用
- ~~用户选择组件bug; 当前选中的用户会在下方列表出现两次；~~
- 迭代sider-bar当改变右侧关联故事的状态时，左边siderbar不会同步修改
- 迭代菜单，当前在迭代页面时，再次点击迭代目录，页面显示”暂无迭代数据“
- 登记工时后，列表实际/预计工时列———同步修改数据
- 组件按需加载，以及打包tree-shaking配置

0427：


完成任务预计登记工时功能；


添加故事列表改成需求列表；

- 应用系统管理
    - ~~删除按钮隐藏；~~
    - ~~选择系统名称后系统缩写不自动填充~~
- 产品需求管理
    - ~~按经办人查询 undefined~~
    - ~~需求类型提示文案；~~
    - ~~导出模板名称；~~
- 运维问题
    - ~~分组字典值错误~~
    - 分组筛选为前端筛选（所有的列表分组都有此问题）
    - ~~questionTags标签字段隐藏；~~
    - ~~图片上传失败~~
    - 详情附件无法查看
    - ~~新增”经办人”必填提示~~
- 工作项
    - ~~负责人字段必填提示未消失~~
    - ~~**筛选条件计数不对；**~~
    - ~~**“保存搜索包“按钮隐藏**~~
    - ~~新建子任务modal title placeholder提示~~
    - ~~详情吸顶隐藏；~~
    - ~~详情-动态模块~~
    - ~~新窗口打开、赋值链接、删除按钮隐藏；~~
    - ~~详情—工时：查看工时汇总调整为包含子项目、工时汇总不展示； 隐藏柱状图~~
    - ~~筛选项任务类型： 用户故事~~
    - ~~登记工时：“保存并新增”按钮隐藏~~
    - ~~关联需求：超链接变为普通标签~~
- 迭代
    - ~~任务移出当前迭代接口404 —- 功能关闭~~

重开；


**非无痕模式下，页面登录退出问题**


根据时间&用户&项目查询可选择任务；


~~应用成本中心字段编辑时校验不通过~~


~~应用 系统名称保存后不可再修改；~~


~~应用系统名称只可选择；~~


**所有模块列表的删除按钮移除；**


~~任务管理、运维问题管理模板下载；~~


~~运维问题列表新增列： 解决手段列；~~


已完成任务是否可以登记工时


### 按钮权限


```plain text
### 权限记录表

## 员工费用
operation_manage_employee_cost_edit 编辑
operation_manage_employee_cost_del 删除
operation_manage_employee_cost_add 新增
operation_manage_employee_cost_import 导入

## 采购费用
operation_manage_employee_cost_import 导入
operation_manage_employee_cost_export 导出
operation_manage_employee_cost_multi_edit 批量编辑
operation_manage_employee_cost_edit 编辑
operation_manage_employee_cost_del 删除

## 人力成本
labor_cost_import 导入
labor_cost_del 删除

## 报销费用
reimburse_cost_manage_edit 编辑
reimburse_cost_manage_import 导入
reimburse_cost_manage_multi_edit 批量编辑

## 资产折旧
operation_asset_depreciation_export 导出

## 管理费用分摊

## 日期信息维护
set_work_day 设置工作/休息日

## 账期维护
account_term_change_status 开启/关闭

## 部门管理
department_manage_save  // 保存

## 成本中心
cost_center_manage_add 新增 
cost_center_manage_export 导出
cost_center_manage_edit 编辑
cost_center_manage_del 删除
```

